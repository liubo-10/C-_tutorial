* 👋 Hi, I’m liubo
* 👀 I’m interested in harmony
* 🌱 I’m currently learning harmony
* 💞️ I’m looking to collaborate on ...
* 📫 How to reach me ...
* 📇 sssssdsdsdsdsdsdasd
* 🎃 dsdsdsdsdsddfsgdgasd
* 🍺 jyukyuiyuiyuigkasd
* 🍥 fsdfgdsgsdgdgadsa
* ✨ xcvxcvxcvxcvdasdaasd
* 🍰 dazdsxasxsaxsaasdsa



# 多态 polymorphism

## 1. 多态的概念

多态性

源程序中相同的程序元素在不同的条件下具有不同的语法解释，从而产生不同的动作，C++语言称这些程序元素具有多态性。简单来说，多态就是“一个接口，多种实现”，就是同一件事情产生多种动作。多态性是面向对象程序设计的一大支柱,在程序中指的是在基类中定义的属性或服务被派生类继承之后,可以表现出不同的行为.也就是指一段程序能够处理不同类型对象的能力. 



举个例子：比如买票这件事情，普通人买票时，做出的动作是全价买票；学生买票时，做出的动作是半价买票；军人买票时，做出的动作是优先买票。

比如去北京这件事情，甲去北京，做出的动作是坐飞机；乙去北京，做出的动作是坐火车；丙去北京，做出的动作是坐汽车。







## 2. 多态的实现

对具有多态性的程序元素作出最终明确的语法解释，这称为多态的实现。



多态从实现的角度来讲可以划分为两类，编译时多态和运行时多态。

前者是在编译的过程中确定了同名操作的具体操作对象，而后者则是在程序运行过程中才动态地确定操作所针对的具体对象。



### 2.1 多态性的实现方式

在面向对象程序设计语言C++中,多态性的实现方式有4种,分别是强制多态、重载多态、类型参数化多态和包含多态. 其中,类型参数化多态和包含多态称为一般多态性,用来系统地描述语义上相关的一组类型;强制多态和重载多态称为特殊多态性,用来描述语义上无关联的类型间的关系.

下面详细介绍这4 种多态性的具体应用.





1 包含多态

在C++中公有继承关系是一种包含关系. 派生类直接公有继承基类定义中的属性或服务,如果1个程序段既能处理基类的对象也能处理基类的派生类的对象,该程序段称为多态程序段. 

C++采用虚函数实现包含多态.一个函数一旦声明为虚函数,在编译阶段,编译器并不按照它的静态类型为它生成调用此函数的版本,而只为它生成虚函数表(表中存放与此函数同名、同参数、同返回值的虚函数的地址).在程序运行时,再根据实际对象的类型,查虚函数表,找出相应版本的函数后,才能使用它.因此,这种不是在编译阶段而是在运行阶段动态确定应使用哪一个虚函数的方式叫动态束定.



要把一个函数声明为虚函数,只要在原函数的声明之前加上virtul关键字即可.利用虚函数进行动态束定,必须用指向基类的指针或引用来访问它,这是因为C++是类型系统,在编译阶段,C ++的变量名或函数名就与相应的存储单元联系起来,使用名字也就是使用对应的存储单元.这有利于检查类型系统,并可产生高效代码.但这种类型的限制缺乏灵活性,不能在运行时改变名字的含义,然而多态要求在不同的上下文中,同一名字有多种含义,C++引入虚函数的目的是告诉编译器在运行时才能确定要调用哪一个虚函数.为了把变量名与相应的存储单元分开,它用指针来调用虚函数.这样,只要改变指针所存地址的值,也就间接地改变了调用对象.例:



```c++
#include < iostream. h >
class Point 　　　　　　　　　　　  //定义基类Point
{
   private:
    float x, y;

   public:
    Point(){};
    Point(float i, float j)
    {
        x = i;
        y = j;
    }
    virtul float area() 　　　　  //声明为虚函数
    {
        return 0. 0;
    }
};

const float Pi = 3. 141593;
class Circle : public Point 　　　　　  //定义派生类Circle
{
   private:
    float radius;

   public:
    Circle(float r)
    {
        radius = r;
    }
    virtul float area()
    {
        return Pi 3 radius 3 radius;
    }
};

void main()
{
    Point* pp;  // 指向基类的指针pp
    Circle c(5. 4321);
    pp = &c;
    cout << pp->area() << endl;  // 调用虚函数, 执行派生类中定义的函数area()
}
```



从上面例子可看出,利用虚函数可在基类和派生类中使用相同的函数名定义函数的不同实现,从而实现“一个接口,多种方式”. 一般说来,外部函数不能声明为虚函数,成员函数(除构造函数) 都可以声明为虚函数. 然而,在处理虚函数时,要动态确定应该选用哪一版本函数,故它比标准函数需要更多的存储空间. 因此,虚函数仅用于处理派生类中一系列同名、同参数和同返回值的函数.





























1.重写/覆盖 的要求
重写/覆盖：子类中有一个跟父类完全相同的虚函数，子类的虚函数重写了基类的虚函数
即：子类父类都有这个虚函数 + 子类的虚函数与父类虚函数的 函数名/参数/返回值 都相同 -> 重写/覆盖（注意：参数只看类型是否相同，不看缺省值）

2.多态两个要求：
1、被调用的函数必须是虚函数，子类对父类的虚函数进行重写 （重写：三同（函数名/参数/返回值）+虚函数）
2、父类指针或者引用去调用虚函数。



三、 多态的原理
1． 1.虚函数介绍
被virtual修饰的成员函数称为虚函数，虚函数的作用是用来实现多态，只有在需要实现多态时，才需要将成员函数设置成虚函数，否则没有必要























## 3. 多态形式

C++语言有多种不同的多态形式，常见的有关键字多态、重载函数多态、运算符多态、对象多态和参数多态等。

### 关键字多态

C++语言中的某些关键字时多义词，具有多态性，例如static、const、void以及public/private/protetced等。关键字多态是由编译器在编译源程序时根据上下文进行语法解释的，是一种编译多态。

 



---
---
---
---
---
---
---
---
---
---
---
---
---
---
---
---
---
---
---
---

